# 地名标签云 - 用户手册

## 概述

最后更新时间：2024年3月7日

### 1. 简介

随着**无线通信技术**和**智能移动终端**的广泛普及，**基于位置的服务（Location-based Service, LBS）**迅速崛起，为用户提供更为个性化和便捷的地理数据服务。传统的**地理信息系统（GIS）**主要面向专业人员，而**LBS**的发展使得大众用户可以轻松地检索附近的景点、餐馆、酒店等信息，实现了地理位置数据的即时获取和应用。

**标签云（Tag Cloud）**，又称**词云**，作为一种**数据可视化方法**，通常直接利用文字符号（或文字标签）来表达文本资料中的主题词或关键词，其基本原理涉及根据主题词的类别、出现频率及重要性等因素，为每个主题词分配相应的**字号、字重、颜色及字体方向**等视觉属性，并将这些标签以无压盖冲突的方式展现于二维或三维空间。

![地理标签云](/img/introduction/1geoWordCloud.png "scale:50%")

已有研究表明**标签云**可帮助用户快速理解文本资料的主干信息，并有诸多研究结合具体案例扩展了标签云的应用：在**视觉编码**方面，基于原有的文字编码，通过额外的图元来传递定量信息，例如**SparkClouds**在标签云上添加迷你趋势线以展示时序数据、**Parallel Tag Clouds**将平行坐标系与标签云相结合以表达时序数据中同一单词在不同时间的词频变化；在**布局方法**上，包括常见的**行列布局**、**Wordle算法（螺旋线算法）**、**力导向布局**，其中**Wordle算法**因结果美观性成为经典算法流行至今，但其算法复杂度较高，因此有许多螺旋线算法的变种算法以适应不同的词云生成目的。

**中心型标签云**作为标签云的变体，在地理信息领域的应用上展现了独特的潜力。其通过将标签以某一地理位置为中心，突显特定地理区域的主题词汇，提供更精准和直观的地理信息表达。此扩展应用为地理空间数据的可视化提供了新的方式，有助于深化对地理信息中关键概念和地域特征的理解，进而推动地理学等领域的研究和分析。

本系统基于**中心型标签云**相关理论，将用户所绘中心作为**布局中心点**，将**兴趣点**转换为文字标签后环绕中心摆放，并利用**色带、字体大小、字重**等视觉变量组合以表达兴趣点的多维属性。本系统集成**地图**的部分功能和**标签云**的视觉展示，旨在满足用户对于地理位置信息的多层次需求，实现对某一场所的**全局和局部尺度**的兼顾观测，为移动生活带来更便捷、智能的地理服务体验。

### 2. 特色功能

#### 2.1 主体功能

本系统基于**Fabric.js**相关接口，复用其对象模型与事件机制，创新性地构建**文本标签的多角度径向移位算法**，其中包括**自适应范围扫描**、**最优步长偏移**等步骤。通过这些算法，在保证局部单一标签尽量无偏的前提下，完成了**全局无压盖的标签云绘制**。

![算法详情](/img/introduction/2AlgorithmDetails.png "scale:95%")

在已绘制的标签云中，系统采用了**色带属性**来表示各标签距离中心位置的远近，并利用**字体大小**来表征地点的重要性或优劣程度。这种绘制方式旨在提高标签云的可视化效果，使得用户能够更直观地理解标签的空间分布和相对重要性。

![标签云绘制](/img/introduction/3tagCloudDrawing.png "scale:95%")

#### 2.2 交互功能

在绘制地名标签云这一主体功能之外，系统还提供一系列**交互定制功能**，以供用户对标签云进行定制化设计。具体包括：

**① 数据定制化导入**：系统内置有全国范围内的**景点兴趣点数据**，同时支持用户导入**自定义兴趣点数据**，拓展绘制内容的范围。用户可以根据自身需求以及所处行业的特点，生成具有更高定制性和适用性的标签云，以更好地满足不同用户群体的需求。

![数据导入](/img/introduction/4dataImport.png "scale:95%")

**② 自定义标签云符号渲染**：支持用户对标签的符号渲染进行修改，具体包括其**字体、字号、字重、色带、背景色**等属性。其中字号可以由用户自定义分类数量，颜色色带可以由用户自定义分级数量及方式（包括**分位数**、**相等间隔**、**几何间隔**等）。

![字体修改](/img/introduction/5fontModification.png "scale:95%")

![配色修改](/img/introduction/6ColourModification.png "scale:95%")

**③ 多尺度标签云显示**：构建**多尺度模型**，支持兼顾全局与局部效应的中心型标签云预览漫游。其参照传统地图在应对尺度效应时采用的方法策略，具体指的是**层级结构设计思想**：通过在不同的层次上呈现标签，以应对不同的地理尺度；具体而言，在较大的尺度下减少标签数量，而在较小尺度下展示更为详细和精细的标签信息，以实现对标签云的自主探索与调整。

![多尺度模型](/img/introduction/7multiscaleModel.png "scale:95%")

---

## 快速上手

最后更新时间：2024年3月8日

### 1. 进入地名标签云页面

用户在登录**地名标签云系统**后，将会看到其初始界面。

![初始界面](/img/getting-started/1initialScreen.png "scale:95%")

### 2. 查看兴趣点数据

可以通过**地图**查看目前系统内存储的**兴趣点数据**。

![地图查看](/img/getting-started/2mapView.png "scale:45%")

### 3. 兴趣点数据筛选

可以对其中的数据进行筛选，并通过**二维表**查看目前筛选的数据。

![数据筛选](/img/getting-started/3dataFiltering.png "scale:95%")

### 4. 生成地名标签云

单击**运行生成标签云**之后，将会生成对应的地名标签云。

![生成标签云](/img/getting-started/4tagCloudDrawing.png "scale:95%")

### 5. 字体修改

在**字体**栏目可以对当前的标签云的字体属性进行更改，包括**字号、字重、字体**属性。

![字体修改](/img/getting-started/5fontModification.png "scale:95%")

### 6. 配色修改

在**配色**栏目可以对当前的标签云的配色属性进行更改，包括**背景色、色带**。

![配色修改](/img/getting-started/6ColourModification.png "scale:95%")

---

## 入门教程

最后更新时间：2024年3月10日

### 1. 地图显示模块

系统初始界面将会展示用户所在定位的**高德地图**，并以**点覆盖物**的形式展示全国范围内的**景点POI数据**。

![地图视图](/img/primer/1MapView.png "scale:95%")

用户可以在此界面使用**鼠标滚轮缩放**、**鼠标拖拽**等事件实现对地图的缩放漫游。且当鼠标悬浮于某一景点POI上时，将会显示该景点的名称。

![显示景点名称](/img/primer/2showAttractionName.png "scale:50%")

本系统也支持用户在**检索框**中输入某一地点，高德地图将会自动通过检索定位缩放移动至用户所输入的地点。

![搜索定位](/img/primer/3searchAndLocate.png "scale:95%")

同时，在该界面还有**放缩按钮**、**比例尺**、**地图切换工具**等地图工具，支持用户对高德地图进行缩放、切换**卫星遥感地图**等操作。

![遥感地图](/img/primer/4remoteSensingMaps.png "scale:95%")

### 2. 数据管理模块

#### 2.1 数据显示

系统初始界面将会以**二维数据表**的形式展示当前系统存储的**兴趣点数据**，系统内默认存储的是全国的景点兴趣点数据。

![数据导入](/img/primer/5DataImport.png "scale:95%")

在单击**编辑表格**之后，用户可以对二维表格内的数据进行修改；再次单击**停止编辑**之后，即可将编辑内容保存至系统。

![数据编辑](/img/primer/6dataEditing.png "scale:95%")

在数据显示模块的右上角有一系列数据操作按钮，包括**切换选择**、**清空选择**、**删除选择**、**显示所有记录**、**显示所选记录**。

用户可以使用鼠标单击单行数据记录前面的**复选框**，即可选中该数据记录。然后便可通过**显示所有记录**与**显示所选记录**切换当前显示的数据。

![显示部分记录](/img/primer/7showPartialRecords.png "scale:95%")

用户可以通过**切换选择**，将选中与未选中的记录进行切换，即将选中记录转为未选中，将未选中记录转为选中项目。

用户可以通过**清空选择**，将所有选中项目进行清空。

![切换选择](/img/primer/8toggleSelection.png "scale:95%")

若是当前已有选中项目，则用户可以通过**删除记录**对选中的项目进行删除。

同时用户可以输入地名，对数据记录进行添加。**注意**：此时需要处于**数据可编辑状态**。

![删除记录](/img/primer/9deleteRecord.png "scale:95%")

#### 2.2 数据导入

系统默认存储全国范围内的**景点兴趣点数据**，用户也可通过**数据导入模块**，导入**自定义兴趣点数据**，拓展绘制内容的范围。

在**数据导入**窗口，需要用户指定**文件名**、**数据编码**、**文本分隔符**、**数据坐标系**属性；在系统在读取首行字段之后，用户还需要进行**字段匹配**，包括**地名**、**经度**、**纬度**、**量值字段**（例如景点的评分数等定量指标）。接着，便可在窗口下方进行**数据预览**。在用户检查字段匹配之后，即可单击**导入数据**将文件中所有兴趣点数据导入系统。

![数据导入](/img/primer/10dataImport.png "scale:95%")

通过数据导入模块，用户可以根据自身需求以及所处行业的特点，生成具有更高**定制性和适用性**的标签云，以更好地满足不同用户群体的需求。

#### 2.3 数据筛选

用户可以将**地图显示模块**与**数据显示模块**进行交互，即用户通过地图显示模块的**数据筛选**功能，在地图上绘制不同的**面状覆盖物**，即可在系统中筛选对应的点数据，以此筛选即将参与绘制标签云的兴趣点数据。

其中绘制的面状覆盖物支持用户绘制**圆形**、**矩形**、**椭圆形**、**多边形**覆盖物。同时也支持用户通过**清除绘制**将所有的覆盖物与已筛选数据进行清除。

![数据筛选](/img/primer/11dataFiltering.png "scale:95%")

### 3. 标签云生成模块

#### 3.1 生成标签云

用户在地图显示模块进行数据筛选之后，再次单击**运行生成标签云**，系统将会对用户所框选的兴趣点数据进行筛选，并采用**分位数法**对其字号、颜色进行设置，接着使用内置的**压盖检测与多角度径向偏移策略**绘制不重叠且基本无偏的地名标签云。

![生成标签云](/img/primer/12generateTagCloud.png "scale:95%")

本系统基于**Fabric.js**相关接口，复用其对象模型与事件机制，创新性地构建**文本标签的多角度径向移位算法**，其中包括**自适应范围扫描**、**最优步长偏移**等步骤。通过这些算法，在保证局部单一标签尽量无偏的前提下，完成了**全局无压盖的标签云绘制**。

在已绘制的标签云中，系统采用了**色带属性**来表示各标签距离中心位置的远近，并利用**字体大小**来表征地点的重要性或优劣程度。这种绘制方式旨在提高标签云的可视化效果，使得用户能够更直观地理解标签的空间分布和相对重要性。

#### 3.2 添加排名与时间

在用户单击**显示排名信息**或是**显示通行时间(min)**之后，将会动态在各标签后面添加显示该兴趣点在当前城市的排名或是距离中心点的通行时间，其中通行时间是通过**高德Web驾车API**进行动态获取。

![添加时间](/img/primer/13addTime.png "scale:95%")

#### 3.3 多尺度效应

用户可以通过单击**精细显示**与**粗略显示**，调用**地理多尺度模型**对展示在图层上的标签数量进行增减。

系统构建的**多尺度模型**，支持兼顾全局与局部效应的中心型标签云预览漫游。其参照传统地图在应对尺度效应时采用的方法策略，具体指的是**层级结构设计思想**：通过在不同的层次上呈现标签，以应对不同的地理尺度；具体而言，在较大的尺度下减少标签数量，而在较小尺度下展示更为详细和精细的标签信息，以实现对标签云的自主探索与调整。

![多尺度模型](/img/primer/14multiscaleModel.png "scale:95%")

### 4. 字体交互模块

系统可单击左侧导航栏**字体**切换至**字体改变交互模块**。在此模块下，用户可以对**字体类别数量**、**字号大小**、**字重**、**字体**进行修改。其每一修改，将会对已绘制的地名标签云进行**实时更新**。

![改变字体](/img/primer/15changeFont.png "scale:95%")

### 5. 配色交互模块

系统可单击左侧导航栏**配色**切换至**配色改变交互模块**。在此模块下，用户可以对**标签云背景**、**色带**、**配色数量**、**渲染方式**进行修改。其中，**配色数量**即是将所有文本标签划分为几种颜色；而**渲染方式**即是包括**相等间隔**、**分位数**、**自然间断点**、**几何间隔**、**标准差**等符号渲染方式。其每一修改，将会对已绘制的地名标签云进行**实时更新**。

![改变配色](/img/primer/16changeColour.png "scale:95%")

### 6. 其余交互功能

在用户鼠标悬浮至某一**图例**上时，将会动态将对应类别的标签进行**高亮显示**。

![高亮显示](/img/primer/17highlighter.png "scale:95%")

在用户单击某一标签后，将会调用**地点详情信息窗口**，在其上展示该景点的**地点名**、**经纬度**、**与中心点之间的距离**、**在该城市的排名**等信息。

![数据详情](/img/primer/18dataDetails.png "scale:95%")

在系统窗口右侧还存在一竖排功能栏，具体包括**返回中心位置**、**返回原始缩放**、**漫游**、**放大**、**缩小**，用户可通过这一系列功能进行交互操作。

![垂直功能](/img/primer/19verticalFunction.png "scale:95%")

---

## 常见问题

最后更新时间：2024年3月10日

等待更新中...

---

## 更新日志

最后更新时间：2024年3月10日

等待更新中...

---

## 相关下载

最后更新时间：2024年3月17日

### 帮助文档

- [附件1：《地名标签云-概述.pdf》](/doc/地名标签云-概述.pdf)
- [附件2：《地名标签云-快速上手.pdf》](/doc/地名标签云-快速上手.pdf)
- [附件3：《地名标签云-入门教程.pdf》](/doc/地名标签云-入门教程.pdf)

### 示例数据

- [《示例数据.csv》](/doc/示例数据.csv)

---

## 视频专区

最后更新时间：2024年3月24日

等待更新中...
